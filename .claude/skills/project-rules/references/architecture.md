# Architecture Details

## ì‹œìŠ¤í…œ íë¦„

```
ğŸ“± Mobile Share -> Telegram App -> Webhook POST -> NestJS App (Railway)
  -> TelegramModule (telegraf)
  -> SummaryService
    -> ExtractorService (URLì¼ ê²½ìš° ë³¸ë¬¸ ì¶”ì¶œ)
    -> LlmService (Claude primary / Gemini fallback)
  -> ë¯¸ë¦¬ë³´ê¸° + ì¸ë¼ì¸ ë²„íŠ¼ ì „ì†¡
  -> ì‚¬ìš©ì í™•ì¸ ì‹œ GithubService -> GitHub Repo
```

## ëª¨ë“ˆë³„ íŒŒì¼ êµ¬ì„±

| ëª¨ë“ˆ | íŒŒì¼ | ì—­í•  |
|------|------|------|
| telegram | telegram.module.ts | ëª¨ë“ˆ ì •ì˜ |
| | telegram.service.ts | Telegraf ë´‡ ì´ˆê¸°í™”, webhook ì„¤ì • |
| | telegram.update.ts | ë©”ì‹œì§€/ì½œë°± í•¸ë“¤ëŸ¬ |
| summary | summary.module.ts | ëª¨ë“ˆ ì •ì˜ |
| | summary.service.ts | ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ |
| | dto/summary-result.dto.ts | ê²°ê³¼ DTO |
| llm | llm.module.ts | ëª¨ë“ˆ ì •ì˜ |
| | llm.service.ts | LLM í˜¸ì¶œ ì¶”ìƒí™” (fallback í¬í•¨) |
| | llm.interface.ts | LlmProvider, SummaryResult ì¸í„°í˜ì´ìŠ¤ |
| | prompts.ts | í”„ë¡¬í”„íŠ¸ ì •ì˜ |
| | providers/claude.provider.ts | Anthropic SDK |
| | providers/gemini.provider.ts | Google Generative AI SDK |
| github | github.module.ts | ëª¨ë“ˆ ì •ì˜ |
| | github.service.ts | Octokit íŒŒì¼ push |
| extractor | extractor.module.ts | ëª¨ë“ˆ ì •ì˜ |
| | extractor.service.ts | URL -> ë³¸ë¬¸ ì¶”ì¶œ |
| config | configuration.ts | í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬ |

## ë§ˆí¬ë‹¤ìš´ ì¶œë ¥ í…œí”Œë¦¿

```markdown
---
title: "{title}"
date: {YYYY-MM-DD}
category: {category}
tags: ["tag1", "tag2"]
source: "{originalUrl}"
---

# {title}

{summary}

---

> Auto-generated by Summary Bot on {YYYY-MM-DD}
```

## Vercel AI SDK ë¯¸ì‚¬ìš© ì´ìœ 

1. í•µì‹¬ ê°€ì¹˜ê°€ ìŠ¤íŠ¸ë¦¬ë° UI -> í…”ë ˆê·¸ë¨ ë´‡ì— ë¶ˆí•„ìš”
2. í…”ë ˆê·¸ë¨ì€ ì™„ì„±ëœ ë©”ì‹œì§€ë¥¼ í•œ ë²ˆì— ì „ì†¡ -> ìŠ¤íŠ¸ë¦¬ë° ë¬´ì˜ë¯¸
3. í•„ìš”í•œ ê±´ `LLM í˜¸ì¶œ -> structured JSON ì‘ë‹µ` ë¿
4. ê³µì‹ SDK ì§ì ‘ ì‚¬ìš©ì´ ì˜ì¡´ì„± ì ê³  ë””ë²„ê¹… ì‰¬ì›€

## Dockerfile

- Multi-stage build: `node:20-alpine`
- pnpm via corepack
- `EXPOSE 3000`, `CMD ["node", "dist/main"]`

## ë¹„ìš© (ì›” 100ê±´ ê¸°ì¤€)

- Railway Hobby: $5/ì›”
- Claude Sonnet 100 ìš”ì•½: ~$0.30
- Gemini Flash: ë¬´ë£Œ í‹°ì–´
- í•©ê³„: ~$5.30/ì›”
